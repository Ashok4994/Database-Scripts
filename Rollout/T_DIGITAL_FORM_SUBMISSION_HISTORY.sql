CREATE TABLE T_DIGITAL_FORM_SUBMISSION_HISTORY
( 
  FORM_SUBMISSION_HISTORY_ID number GENERATED BY DEFAULT ON NULL AS IDENTITY,
  FORM_SUBMISSION_ID number,
  CREATED_DATE date NOT NULL,
  STATUS varchar2(50),
  CAPTURED_DATA CLOB,
  SANITIZED_FILES CLOB,
  ACTION varchar2(50),
  ERROR_DETAILS varchar2(500),
  RECOVERED VARCHAR2(1) NOT NULL
)
TABLESPACE ACCOUNT_D;


CREATE UNIQUE INDEX FORM_SUBMISSION_HISTORY_ID
ON T_DIGITAL_FORM_SUBMISSION_HISTORY
(FORM_SUBMISSION_HISTORY_ID)
TABLESPACE ACCOUNT_I;

CREATE INDEX IDX_DFSH_CREATED_DATE
ON T_DIGITAL_FORM_SUBMISSION_HISTORY
(CREATED_DATE)
TABLESPACE ACCOUNT_I;

CREATE INDEX IDX_DFSH_FORM_SUBMISSION_ID
ON T_DIGITAL_FORM_SUBMISSION_HISTORY
(FORM_SUBMISSION_ID)
TABLESPACE ACCOUNT_I;

ALTER TABLE T_DIGITAL_FORM_SUBMISSION_HISTORY ADD (
  CONSTRAINT PK_T_DIGITAL_FORM_SUBMISSION_HISTORY_ID 
  PRIMARY KEY (FORM_SUBMISSION_HISTORY_ID)
    USING INDEX
    TABLESPACE ACCOUNT_I);


ALTER TABLE T_DIGITAL_FORM_SUBMISSION_HISTORY
  ADD CONSTRAINT FK_DIGITAL_FORM_SUBMISSION_HISTORY_DIGITAL_FORM_SUBMISSION
  FOREIGN KEY (FORM_SUBMISSION_ID)
  REFERENCES  T_DIGITAL_FORM_SUBMISSION(FORM_SUBMISSION_ID);
  
CREATE INDEX IDX_DFSH_TRUNC_CREATED_DATE
ON T_DIGITAL_FORM_SUBMISSION_HISTORY
(TRUNC(CREATED_DATE))
TABLESPACE ACCOUNT_I;

